\nimport os, sys, time, shutil, datetime, subprocess, difflib, threading, platform, re, requests\nfrom pathlib import Path\n\nVERSIONS_DIR = os.path.expanduser(\"~/.jemai_versions\")\nSELF_PATH = os.path.abspath(__file__)\nCHATLOG_PATH = os.path.expanduser(\"~/chatgpt_export.txt\")\nSCRAPE_URLS = [\n    \"https://raw.githubusercontent.com/someproject/README.md\",\n    # Add more URLs as you wish\n]\nVS_CODE_SETTINGS = os.path.expanduser(\"~/.config/Code/User/settings.json\")  # Linux\nCLIPBOARD_CMD = \"xclip -o -selection clipboard\"  # Linux; change for Windows/Mac\n\ndef backup_current():\n    os.makedirs(VERSIONS_DIR, exist_ok=True)\n    stamp = datetime.datetime.now().strftime(\"%d-%m-%Y-%H%M%S\")\n    dst = os.path.join(VERSIONS_DIR, f\"jemai_{stamp}.py\")\n    shutil.copy2(SELF_PATH, dst)\n    print(f\"[JEMAI] Backup saved to {dst}\")\n\ndef smoke_test(new_code):\n    test_path = os.path.join(VERSIONS_DIR, \"jemai_test.py\")\n    with open(test_path, \"w\") as f:\n        f.write(new_code)\n    try:\n        output = subprocess.check_output(\n            [sys.executable, test_path, \"--smoketest\"],\n            stderr=subprocess.STDOUT, timeout=20\n        )\n        return True, output.decode(errors=\"replace\")\n    except Exception as e:\n        return False, f\"{type(e).__name__}: {e}\"\n\ndef try_upgrade(new_code, why=\"manual\"):\n    print(f\"[JEMAI] Smoke testing upgrade ({why})...\")\n    ok, out = smoke_test(new_code)\n    if ok:\n        print(f\"[JEMAI] Test passed ({why}). Upgrading!\")\n        backup_current()\n        with open(SELF_PATH, \"w\") as f:\n            f.write(new_code)\n        print(f\"[JEMAI] Upgrade applied! \ud83d\udd04 Reason: {why}\\n\")\n        os.execv(sys.executable, [sys.executable] + sys.argv)\n    else:\n        print(f\"[JEMAI] Upgrade failed ({why})!\\n\", out)\n        print(\"[JEMAI] Staying alive on old code.\\n\")\n\ndef scrape_chatlog():\n    if not os.path.exists(CHATLOG_PATH):\n        print(f\"[JEMAI] No chat log found at {CHATLOG_PATH}.\")\n        return []\n    print(f\"[JEMAI] Scanning chat export for upgrades...\")\n    with open(CHATLOG_PATH, \"r\") as f:\n        data = f.read()\n    return re.findall(r\"