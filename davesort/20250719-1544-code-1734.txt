\njemai_core:\n  build:\n    context: .\n    dockerfile: Dockerfile\n  container_name: jemai_prod_core\n  ports:\n    - \"5000:5000\"\n    - \"5678:5678\"\n  extra_hosts:\n    - \"host.docker.internal:host-gateway\"\n  volumes:\n    - \".:/app\"\n    - \"/var/run/docker.sock:/var/run/docker.sock\"\n    - \"${PROD_RAG_DATA_DIR}:/app/rag/chroma_data\"\n  depends_on:\n    - ollama\n  restart: unless-stopped\n  environment:\n    - FLASK_APP=jemai_core.py\n    - OLLAMA_HOST=http://jemai_prod_ollama:11434\n    - TZ=Australia/Perth\n  command: python3 -m debugpy --listen 0.0.0.0:5678 --wait-for-client -m flask run --host=0.0.0.0 --port=5000\n