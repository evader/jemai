\ncat <<'EOF' > ~/setup_openwebui_gpt4.sh\n#!/bin/bash\nset -e\n\necho \"=== [JEM AI] Open WebUI + GPT-4 Integration Script ===\"\n\n# 1. Kill all but one Open WebUI container (keep the one mapping 8080:8080)\nmain_id=$(docker ps --filter \"ancestor=ghcr.io/open-webui/open-webui:main\" --filter \"publish=8080\" --format \"{{.ID}}\" | head -n1)\nother_ids=$(docker ps --filter \"ancestor=ghcr.io/open-webui/open-webui:main\" --format \"{{.ID}}\" | grep -v \"^$main_id\" || true)\nif [[ \"$other_ids\" != \"\" ]]; then\n  echo \"[INFO] Stopping duplicate Open WebUI containers...\"\n  docker stop $other_ids || true\n  docker rm $other_ids || true\nfi\n\n# 2. Pull and tag the GPT-4 model in Ollama (Llama-3-70b or other if you want)\necho \"[INFO] Ensuring GPT-4 model is available in Ollama...\"\nollama pull llama3:70b-chat || ollama pull llama3\nollama tag llama3:70b-chat gpt4 || true\n\n# 3. Set correct volume/data permissions for Open WebUI and Ollama\nfor v in openwebui_data ollama; do\n  p=\"/var/lib/docker/volumes/${v}_data/_data\"\n  if [ -d \"$p\" ]; then sudo chown -R 1000:1000 \"$p\"; sudo chmod -R 775 \"$p\"; fi\ndone\n\n# 4. Write minimal Open WebUI config for admin/root/full shell/log access\nDATA_VOL=\"/var/lib/docker/volumes/openwebui_data/_data\"\nsudo mkdir -p \"$DATA_VOL\"\ncat <<EOCFG | sudo tee $DATA_VOL/config.json >/dev/null\n{\n  \"ollama_url\": \"http://host.docker.internal:11434\",\n  \"ollama_model\": \"gpt4\",\n  \"default_role\": \"admin\",\n  \"allow_terminal\": true,\n  \"allow_logs\": true,\n  \"admin_auto_approve\": true,\n  \"open_registration\": true,\n  \"log_level\": \"debug\",\n  \"log_visible\": true,\n  \"branding\": \"JEM AI Synapz\",\n  \"users\": [\n    { \"username\": \"admin\", \"password\": \"jemai\", \"role\": \"admin\", \"shell\": true }\n  ]\n}\nEOCFG\n\n# 5. Restart Open WebUI container\necho \"[INFO] Restarting Open WebUI container...\"\nif [ -n \"$main_id\" ]; then\n  docker restart \"$main_id\"\nelse\n  docker run -d -p 8080:8080 --name open-webui --restart always \\\n    -v openwebui_data:/app/data \\\n    -e OLLAMA_URL=\"http://host.docker.internal:11434\" \\\n    -e DEFAULT_MODEL=\"gpt4\" \\\n    ghcr.io/open-webui/open-webui:main\nfi\n\necho \"=== [DONE] ===\"\necho \"\u2022 Open WebUI: http://localhost:8080/\"\necho \"\u2022 Login: admin / jemai\"\necho \"\u2022 Model: gpt4 (llama3:70b-chat)\"\necho \"\u2022 All users are admins, shell & logs are visible by default.\"\necho \"If you want to enforce stricter login or use a different model, just edit:\"\necho \"    sudo nano $DATA_VOL/config.json\"\nEOF\n\nchmod +x ~/setup_openwebui_gpt4.sh\necho \"[INFO] Ready. Now run:\"\necho \"      bash ~/setup_openwebui_gpt4.sh\"\n