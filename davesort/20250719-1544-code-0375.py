\nimport paho.mqtt.publish as publish\nimport socket, json\n\nNODE = socket.gethostname()\nBROKER = \"mqtt.broker.local\"\n\ntopic = f\"homeassistant/switch/{NODE}/config\"\npayload = json.dumps({\n    \"name\": f\"Jemai {NODE}\",\n    \"command_topic\": f\"jemai/{NODE}/cmd\",\n    \"state_topic\": f\"jemai/{NODE}/status\",\n    \"unique_id\": f\"jemai_{NODE}\",\n    \"availability_topic\": f\"jemai/{NODE}/avail\"\n})\npublish.single(topic, payload, hostname=BROKER)\n