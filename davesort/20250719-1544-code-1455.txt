\n#!/bin/bash\nset -e\n\necho \"===== JEMAI NUKE & FIX: Ollama + Open WebUI Reset =====\"\n\necho \"[KILL] Stopping systemd Ollama service if running...\"\nsudo systemctl stop ollama || true\nsudo systemctl disable ollama || true\nsudo systemctl reset-failed ollama || true\n\necho \"[KILL] Killing leftover ollama serve processes...\"\nsudo pkill -f '/usr/local/bin/ollama serve' || true\n\necho \"[1/6] Stopping & removing ALL Ollama containers...\"\ndocker ps -a --filter \"ancestor=ollama/ollama:latest\" -q | xargs -r docker rm -f || true\ndocker ps -a --filter \"name=ollama\" -q | xargs -r docker rm -f || true\n\necho \"[2/6] Stopping & removing ALL Open WebUI containers...\"\ndocker ps -a --filter \"ancestor=ghcr.io/open-webui/open-webui:main\" -q | xargs -r docker rm -f || true\ndocker ps -a --filter \"name=open-webui\" -q | xargs -r docker rm -f || true\n\necho \"[3/6] Removing duplicate ollama/openwebui volumes...\"\nfor v in $(docker volume ls -q | grep -E 'ollama|openwebui' | grep -v -E '^ollama$|^openwebui_data$'); do\n  docker volume rm \"$v\" || true\ndone\n\necho \"[INFO] Remaining Docker volumes:\"\ndocker volume ls | grep -E 'ollama|openwebui' || echo \"(none)\"\n\necho \"[4/6] Starting fresh Ollama container (ollama:11434)...\"\ndocker run -d \\\n  --name ollama \\\n  --restart always \\\n  -p 11434:11434 \\\n  -v ollama:/root/.ollama \\\n  ollama/ollama:latest\n\necho \"[5/6] Starting fresh Open WebUI (open-webui:8080)...\"\ndocker run -d \\\n  --name open-webui \\\n  --restart always \\\n  -p 8080:8080 \\\n  -v openwebui_data:/app/backend/data \\\n  ghcr.io/open-webui/open-webui:main\n\nsleep 3\n\necho \"[INFO] Final running containers:\"\ndocker ps --format \"table {{.Names}}\\t{{.Image}}\\t{{.Status}}\\t{{.Ports}}\"\n\necho \"[INFO] Port check (should be one ollama, one open-webui):\"\nsudo lsof -i :11434\nsudo lsof -i :8080\n\necho \"===[DONE]===\"\n