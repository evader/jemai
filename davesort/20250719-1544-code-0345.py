\n# jemai_cli.py (append to imports)\nfrom synapz_core import Synapz\n\n# ... rest of your code as before ...\n\nconsole = Console()\nsynapz = Synapz(console)\n# ... ollama setup, etc ...\n\ndef parse_and_route(user):\n    # \"natural language\" for Synapz agent\n    if user.lower().startswith(\"synapz \") or user.lower().startswith(\"fix \") or \"status\" in user.lower():\n        return synapz.auto_mode(user)\n    # Direct shell\n    if user.startswith(\"!cmd \"):\n        return shell(user[5:])\n    if user.startswith(\"read \"):\n        return file_read(user.split(\" \",1)[1])\n    if user.startswith(\"write \"):\n        return file_write(user.split(\" \",1)[1])\n    if user.startswith(\"append \"):\n        return file_append(user.split(\" \",1)[1])\n    # Try to detect shell\n    if user.split(\" \")[0] in [\"ls\", \"cd\", \"cat\", \"cp\", \"mv\", \"ps\", \"du\", \"df\", \"free\", \"top\", \"whoami\"]:\n        return shell(user)\n    # Otherwise, default to AI chat\n    return ollama_chat(current_model, user)\n\n# Main loop (replace previous)\nsession = PromptSession(\"> \")\nwhile True:\n    try:\n        user = session.prompt()\n        if user.strip() in [\"exit\", \"quit\"]:\n            break\n        console.print(parse_and_route(user))\n    except (EOFError, KeyboardInterrupt):\n        break\n