\nimport os\nimport sys\nimport psutil\n\ndef check_parent_and_exit():\n    # Only allow if parent is systemd\n    ppid = os.getppid()\n    parent = psutil.Process(ppid)\n    if parent.name() not in [\"systemd\", \"python3\"]:  # systemd for service, python3 for Restart\n        print(\"\u274c Manual execution is disabled. Use `sudo systemctl restart synapz_core` instead.\")\n        sys.exit(1)\n\ncheck_parent_and_exit()\n