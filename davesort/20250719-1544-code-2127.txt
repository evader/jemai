\nservices:\n  jemai_core:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    container_name: jemai_prod_core\n    ports:\n      - \"5000:5000\"\n    volumes:\n      - ./rag/chroma_data:/app/rag/chroma_data\n      - ./templates:/app/templates\n    environment:\n      - OLLAMA_HOST=http://jemai_prod_ollama:11434\n      - TZ=Australia/Perth\n    depends_on:\n      - ollama\n    restart: unless-stopped\n\n  ollama:\n    image: ollama/ollama:latest\n    container_name: jemai_prod_ollama\n    ports:\n      - \"11434:11434\"\n    volumes:\n      - ollama_prod_data:/root/.ollama\n    deploy:\n      resources:\n        reservations:\n          devices:\n            - driver: nvidia\n              count: all\n              capabilities: [gpu]\n    restart: unless-stopped\n    environment:\n      - OLLAMA_HOST=0.0.0.0\n      - TZ=Australia/Perth\n\n  open-webui:\n    image: ghcr.io/open-webui/open-webui:main\n    container_name: jemai_prod_open_webui\n    ports:\n      - \"3000:8080\"\n    depends_on:\n      - ollama\n    environment:\n      - OLLAMA_BASE_URL=http://jemai_prod_ollama:11434\n    restart: unless-stopped\n\nvolumes:\n  ollama_prod_data:\n