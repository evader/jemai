async function handleExecute(mode) {
        const inputValue = commandInput.value.trim();
        if (!inputValue) return;
        setControlsDisabled(true); // <--- Problem: Disables before clearing value for updateJobUI
        commandInput.value = ''; // <--- Problem: Clears value before calling updateJobUI
        commandInput.focus();
        const jobId = generateJobId();
        let initialOutput = `--- Sending command to JEM AI: '${inputValue}' via ${mode} mode ---`;
        updateJobUI(jobId, inputValue, mode, 'thinking', initialOutput); // Uses cleared/disabled inputValue
        // ... rest ...
    }